!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("url"),require("@angular/common/http"),require("util"),require("@angular/core"),require("rxjs-compat"),require("@angular/router"),require("@ngx-translate/http-loader"),require("@ngx-translate/core")):"function"==typeof define&&define.amd?define("@sitmun/frontend-core",["exports","rxjs","rxjs/operators","url","@angular/common/http","util","@angular/core","rxjs-compat","@angular/router","@ngx-translate/http-loader","@ngx-translate/core"],e):e((t.sitmun=t.sitmun||{},t.sitmun["frontend-core"]={}),t.rxjs,t.rxjs.operators,null,t.ng.common.http,null,t.ng.core,null,t.ng.router,null,null)}(this,function(t,c,h,u,l,a,e,r,n,i,o){"use strict";var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function p(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function b(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function f(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(u){i={error:u}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}var y=function(){function s(){var o=this;this.totalElements=0,this.totalPages=1,this.pageNumber=1,this.result=[],this.push=function(t){o.result.push(t)},this.length=function(){return o.result.length},this.init=function(t,e,r){var n=d.createEmptyResult(o._embedded);return n.sortInfo=r,d.instantiateResourceCollection(t,e,n),n},this.next=function(e){return o.next_uri?d.getHttp().get(d.getProxy(o.next_uri),{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)})):c.throwError("no next defined")},this.prev=function(e){return o.prev_uri?d.getHttp().get(d.getProxy(o.prev_uri),{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)})):c.throwError("no prev defined")},this.first=function(e){return o.first_uri?d.getHttp().get(d.getProxy(o.first_uri),{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)})):c.throwError("no first defined")},this.last=function(e){return o.last_uri?d.getHttp().get(d.getProxy(o.last_uri),{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)})):c.throwError("no last defined")},this.page=function(e,t){o.self_uri=o.self_uri.replace("{?page,size,sort}",""),o.self_uri=o.self_uri.replace("{&sort}","");var r=u.parse(d.getProxy(o.self_uri)),n=s.replaceOrAdd(r.query,"size",o.pageSize.toString());n=s.replaceOrAdd(n,"page",t.toString());var i=r.query?d.getProxy(o.self_uri).replace(r.query,n):d.getProxy(o.self_uri).concat(n);return i=o.addSortInfo(i),d.getHttp().get(i,{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)}))},this.sortElements=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];o.self_uri=o.self_uri.replace("{?page,size,sort}",""),o.self_uri=o.self_uri.replace("{&sort}","");var n=d.getProxy(o.self_uri).concat("?","size=",o.pageSize.toString(),"&page=",o.pageNumber.toString());return n=o.addSortInfo(n),d.getHttp().get(n,{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,r)}),h.catchError(function(t){return c.throwError(t)}))},this.size=function(e,t){var r=d.getProxy(o.self_uri).concat("?","size=",t.toString());return r=o.addSortInfo(r),d.getHttp().get(r,{headers:d.headers}).pipe(h.map(function(t){return o.init(e,t,o.sortInfo)}),h.catchError(function(t){return c.throwError(t)}))}}return s.prototype.addSortInfo=function(t){if(this.sortInfo)try{for(var e=b(this.sortInfo),r=e.next();!r.done;r=e.next()){var n=r.value;t=t.concat("&sort=",n.path,",",n.order)}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e["return"])&&o.call(e)}finally{if(i)throw i.error}}return t;var i,o},s.replaceOrAdd=function(t,e,r){if(t){var n=t.indexOf(e),i=-1==t.indexOf("&",n)?t.indexOf("/",n):t.indexOf("&",n);if(-1!=n){var o=t.substring(n,i);t=t.replace(o,e+"="+r)}else t=t.concat("&"+e+"="+r)}else t="?"+e+"="+r;return t},s}(),d=function(){function o(){}return o.optionParams=function(t,e){if(e){if(e.params)try{for(var r=b(e.params),n=r.next();!n.done;n=r.next()){var i=n.value;t=t.append(i.key,i.value.toString())}}catch(f){c={error:f}}finally{try{n&&!n.done&&(l=r["return"])&&l.call(r)}finally{if(c)throw c.error}}if(e.size&&(t=t.append("size",e.size.toString())),e.sort)try{for(var o=b(e.sort),s=o.next();!s.done;s=o.next()){var u=s.value,a="";a=u.path?a.concat(u.path):a,a=u.order?a.concat(",").concat(u.order):a,t=t.append("sort",a)}}catch(y){p={error:y}}finally{try{s&&!s.done&&(h=o["return"])&&h.call(o)}finally{if(p)throw p.error}}}return t;var c,l,p,h},o.resolveRelations=function(r){var n=this,i={},t=function(e){if(!a.isNullOrUndefined(r[e]))if(o.className(r[e]).find(function(t){return"Resource"==t}))r[e]._links&&(i[e]=r[e]._links.self.href);else if(Array.isArray(r[e])){var t=r[e];t&&(i[e]=new Array,t.forEach(function(t){a.isPrimitive(t)?i[e].push(t):i[e].push(n.resolveRelations(t))}))}else i[e]=r[e]};for(var e in r)t(e);return i},o.createEmptyResult=function(t){var e=new y;return e._embedded=t,e},o.getClassName=function(t){var e=/function (.+?)\(/.exec(t.constructor.toString());return e&&1<e.length?e[1]:""},o.className=function(t){for(var e,r=[],n=Object.getPrototypeOf(t);"Object"!==(e=o.getClassName(n));)r.push(e),n=Object.getPrototypeOf(n);return r},o.instantiateResourceCollection=function(t,e,r,n,i){try{for(var o=b(Object.keys(e[r._embedded])),s=o.next();!s.done;s=o.next()){var u=s.value;if(!i||i&&u==i){var a=e[r._embedded][u];try{for(var c=b(a),l=c.next();!l.done;l=c.next()){var p=l.value,h=new t;h=this.searchSubtypes(n,u,h),this.instantiateResource(h,p),r.push(h)}}catch(g){d={error:g}}finally{try{l&&!l.done&&(v=c["return"])&&v.call(c)}finally{if(d)throw d.error}}}}}catch(_){f={error:_}}finally{try{s&&!s.done&&(y=o["return"])&&y.call(o)}finally{if(f)throw f.error}}return r.totalElements=e.page?e.page.totalElements:r.length,r.totalPages=e.page?e.page.totalPages:1,r.pageNumber=e.page?e.page.number:1,r.pageSize=e.page?e.page.size:20,r.self_uri=e._links&&e._links.self?e._links.self.href:undefined,r.next_uri=e._links&&e._links.next?e._links.next.href:undefined,r.prev_uri=e._links&&e._links.prev?e._links.prev.href:undefined,r.first_uri=e._links&&e._links.first?e._links.first.href:undefined,r.last_uri=e._links&&e._links.last?e._links.last.href:undefined,r;var f,y,d,v},o.searchSubtypes=function(r,n,i){if(r&&r.subtypes){var t=r.subtypes.keys();Array.from(t).forEach(function(t){if(n.toLowerCase().startsWith(t.toLowerCase())){var e=r.subtypes.get(t);i=new e}})}return i},o.instantiateResource=function(t,e){for(var r in e)t[r]=e[r];return t},o.setProxyUri=function(t){o.proxy_uri=t},o.setRootUri=function(t){o.root_uri=t},o.getURL=function(){return o.addSlash(o.proxy_uri&&""!=o.proxy_uri?o.proxy_uri:o.root_uri)},o.addSlash=function(t){var e=u.parse(t);return a.isNullOrUndefined(e.search)&&t&&"/"!=t[t.length-1]?t+"/":t},o.getProxy=function(t){return o.proxy_uri&&""!=o.proxy_uri?o.addSlash(t.replace(o.root_uri,o.proxy_uri)):t},o.setHttp=function(t){o.http=t},o.getHttp=function(){return o.http},o.getRootUri=function(){return o.root_uri},o.headers=new l.HttpHeaders,o.proxy_uri=null,o.root_uri=null,o.http=null,o}(),v=function(){function t(){}return Object.defineProperty(t.prototype,"subtypes",{get:function(){return this._subtypes},set:function(t){this._subtypes=t},enumerable:!0,configurable:!0}),t.prototype.getRelationArray=function(e,t,r,n,i){var o=d.optionParams(new l.HttpParams,n),s=d.createEmptyResult(a.isNullOrUndefined(r)?"_embedded":r);return a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[t])?c.of([]):d.getHttp().get(d.getProxy(this._links[t].href),{headers:d.headers,params:o}).pipe(h.map(function(t){return d.instantiateResourceCollection(e,t,s,i)}),h.map(function(t){return t.result}))},t.prototype.getRelation=function(t,e,l){var p=new t;return a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[e])?c.of(null):d.getHttp().get(d.getProxy(this._links[e].href),{headers:d.headers}).pipe(h.map(function(t){if(l)try{for(var e=b(Object.keys(t._links)),r=e.next();!r.done;r=e.next()){var n=r.value;if("self"==n){var i=t._links[n].href,o=i.lastIndexOf("/"),s=i.replace(d.getRootUri(),"").substring(0,o);p=d.searchSubtypes(l,s,p);break}}}catch(c){u={error:c}}finally{try{r&&!r.done&&(a=e["return"])&&a.call(e)}finally{if(u)throw u.error}}return d.instantiateResource(p,t);var u,a}))},t.prototype.addRelation=function(t,e){if(a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[t]))return c.throwError("no relation found");var r=d.headers.append("Content-Type","text/uri-list");return d.getHttp().post(d.getProxy(this._links[t].href),e._links.self.href,{headers:r})},t.prototype.updateRelation=function(t,e){if(a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[t]))return c.throwError("no relation found");var r=d.headers.append("Content-Type","text/uri-list");return d.getHttp().patch(d.getProxy(this._links[t].href),e._links.self.href,{headers:r})},t.prototype.substituteRelation=function(t,e){if(a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[t]))return c.throwError("no relation found");var r=d.headers.append("Content-Type","text/uri-list");return d.getHttp().put(d.getProxy(this._links[t].href),e._links.self.href,{headers:r})},t.prototype.substituteAllRelation=function(t,e){if(a.isNullOrUndefined(this._links)||a.isNullOrUndefined(this._links[t]))return c.throwError("no relation found");var r=d.headers.append("Content-Type","text/uri-list");return d.getHttp().put(d.getProxy(this._links[t].href),e.map(function(t){return t._links.self.href}),{headers:r})},t.prototype.deleteRelation=function(t,e){if(a.isNullOrUndefined(this._links)||a.isNullOrUndefined(e._links))return c.throwError("no relation found");var r=e._links.self.href,n=r.lastIndexOf("/")+1;if(-1==n)return c.throwError("no relation found");var i=r.substring(n);return d.getHttp()["delete"](d.getProxy(this._links[t].href+"/"+i),{headers:d.headers})},t.prototype.deleteAllRelation=function(t){return d.getHttp()["delete"](d.getProxy(this._links[t].href),{headers:d.headers})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}(),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),_=function(){function t(t){this.externalConfigurationService=t,d.setProxyUri(t.getProxyUri()),d.setRootUri(t.getRootUri()),d.setHttp(t.getHttp())}return t.prototype.updateExternalConfigurationHandlerInterface=function(t){this.externalConfigurationService=t,d.setProxyUri(t.getProxyUri()),d.setRootUri(t.getRootUri()),d.setHttp(t.getHttp())},t.prototype.getExternalConfiguration=function(){return this.externalConfigurationService.getExternalConfiguration()},t.prototype.getProxyUri=function(){return this.externalConfigurationService.getProxyUri()},t.prototype.getRootUri=function(){return this.externalConfigurationService.getRootUri()},t.prototype.getURL=function(){return d.getURL()},t.prototype.getHttp=function(){return d.getHttp()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:["ExternalConfigurationService"]}]}]},t}(),k=function(){function r(t){this.externalService=t}return r.getURL=function(){return d.getURL()},r.prototype.getAll=function(e,t,r,n,i,o){var s=this.getResourceUrl(t).concat("?projection=view"),u=d.optionParams(new l.HttpParams,n),a=d.createEmptyResult(r);return this.setUrls(a),a.sortInfo=n?n.sort:undefined,d.getHttp().get(s,{headers:d.headers,params:u}).pipe(h.map(function(t){return d.instantiateResourceCollection(e,t,a,i,o)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.get=function(t,e,r){var n=this.getResourceUrl(e).concat("/",r,"?projection=view"),i=new t;return this.setUrlsResource(i),d.getHttp().get(n,{headers:d.headers}).pipe(h.map(function(t){return d.instantiateResource(i,t)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.getBySelfLink=function(t,e){var r=new t;return this.setUrlsResource(r),d.getHttp().get(d.getProxy(e),{headers:d.headers}).pipe(h.map(function(t){return d.instantiateResource(r,t)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.search=function(e,t,r,n,i){var o=this.getResourceUrl(r).concat("/search/",t),s=d.optionParams(new l.HttpParams,i),u=d.createEmptyResult(n);return this.setUrls(u),d.getHttp().get(o,{headers:d.headers,params:s}).pipe(h.map(function(t){return d.instantiateResourceCollection(e,t,u)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.searchSingle=function(t,e,r,n){var i=this.getResourceUrl(r).concat("/search/",e),o=d.optionParams(new l.HttpParams,n),s=new t;return this.setUrlsResource(s),d.getHttp().get(i,{headers:d.headers,params:o}).pipe(h.map(function(t){return d.instantiateResource(s,t)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.customQuery=function(e,t,r,n,i){var o=this.getResourceUrl(r+t),s=d.optionParams(new l.HttpParams,i),u=d.createEmptyResult(n);return this.setUrls(u),d.getHttp().get(o,{headers:d.headers,params:s}).pipe(h.map(function(t){return d.instantiateResourceCollection(e,t,u)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.getByRelation=function(t,e){var r=new t;return this.setUrlsResource(r),d.getHttp().get(e,{headers:d.headers}).pipe(h.map(function(t){return d.instantiateResource(r,t)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.getByRelationArray=function(e,t,r,n){var i=d.createEmptyResult(r);return this.setUrls(i),d.getHttp().get(t,{headers:d.headers}).pipe(h.map(function(t){return d.instantiateResourceCollection(e,t,i,n)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.count=function(t){var e=this.getResourceUrl(t).concat("/search/countAll");return d.getHttp().get(e,{headers:d.headers,observe:"body"}).pipe(h.map(function(t){return Number(t.body)}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.create=function(t,r){var e=d.getURL()+t,n=d.resolveRelations(r);return this.setUrlsResource(r),d.getHttp().post(e,n,{headers:d.headers,observe:"response"}).pipe(h.map(function(t){if(200<=t.status&&t.status<=207)return d.instantiateResource(r,t.body);if(500==t.status){var e=t.body;return c.throwError(e.error)}}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.update=function(r){var t=d.getProxy(r._links.self.href),e=d.resolveRelations(r);return this.setUrlsResource(r),d.getHttp().put(t,e,{headers:d.headers,observe:"response"}).pipe(h.map(function(t){if(200<=t.status&&t.status<=207)return d.instantiateResource(r,t.body);if(500==t.status){var e=t.body;return c.throwError(e.error)}}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.updateCollection=function(t,e){var r=d.getProxy(e),n=d.headers;return n.set("Content-Type","text/uri-list"),d.getHttp().put(r,t,{headers:n,observe:"response"}).pipe(h.map(function(t){if(200<=t.status&&t.status<=207)return"";if(500==t.status){var e=t.body;return c.throwError(e.error)}}),h.catchError(function(t){return c.throwError(t)}))},r.prototype.patch=function(r){var t=d.getProxy(r._links.self.href),e=d.resolveRelations(r);return this.setUrlsResource(r),d.getHttp().patch(t,e,{headers:d.headers,observe:"response"}).pipe(h.map(function(t){if(200<=t.status&&t.status<=207)return d.instantiateResource(r,t.body);if(500==t.status){var e=t.body;return c.throwError(e.error)}}),h.catchError(function(t){return c.throwError(t)}))},r.prototype["delete"]=function(t){var e=d.getProxy(t._links.self.href);return d.getHttp()["delete"](e,{headers:d.headers}).pipe(h.catchError(function(t){return c.throwError(t)}))},r.prototype.hasNext=function(t){return t.next_uri!=undefined},r.prototype.hasPrev=function(t){return t.prev_uri!=undefined},r.prototype.hasFirst=function(t){return t.first_uri!=undefined},r.prototype.hasLast=function(t){return t.last_uri!=undefined},r.prototype.next=function(t,e){return t.next(e)},r.prototype.prev=function(t,e){return t.prev(e)},r.prototype.first=function(t,e){return t.first(e)},r.prototype.last=function(t,e){return t.last(e)},r.prototype.page=function(t,e,r){return t.page(e,r)},r.prototype.sortElements=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return t.sortElements.apply(t,function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}([e],r))},r.prototype.size=function(t,e,r){return t.size(e,r)},r.prototype.getResourceUrl=function(t){var e=r.getURL();return e.endsWith("/")||(e=e.concat("/")),t?e.concat(t):e},r.prototype.setUrls=function(t){t.proxyUrl=this.externalService.getProxyUri(),t.rootUrl=this.externalService.getRootUri()},r.prototype.setUrlsResource=function(t){t.proxyUrl=this.externalService.getProxyUri(),t.rootUrl=this.externalService.getRootUri()},r.decorators=[{type:e.Injectable}],r.ctorParameters=function(){return[{type:_}]},r}(),I=function(){function e(t,e,r,n){this.injector=r,this._embedded="_embedded",this.type=t,this.resource=e,this.resourceService=r.get(k),a.isNullOrUndefined(n)||(this._embedded=n)}return e.prototype.handleError=function(t){return e.handleError(t)},e.handleError=function(t){return c.throwError(t)},e.prototype.getAll=function(e,t,r){var n=this;return this.resourceService.getAll(this.type,this.resource,this._embedded,e,t,r).pipe(h.mergeMap(function(t){return e&&e.notPaged&&!a.isNullOrUndefined(t.first_uri)?(e.notPaged=!1,e.size=t.totalElements,n.getAll(e)):(n.resourceArray=t,c.of(t.result))}))},e.prototype.get=function(t){return this.resourceService.get(this.type,this.resource,t)},e.prototype.getBySelfLink=function(t){return this.resourceService.getBySelfLink(this.type,t)},e.prototype.search=function(e,r){var n=this;return this.resourceService.search(this.type,e,this.resource,this._embedded,r).pipe(h.mergeMap(function(t){return r&&r.notPaged&&!a.isNullOrUndefined(t.first_uri)?(r.notPaged=!1,r.size=t.totalElements,n.search(e,r)):(n.resourceArray=t,c.of(t.result))}))},e.prototype.searchSingle=function(t,e){return this.resourceService.searchSingle(this.type,t,this.resource,e)},e.prototype.customQuery=function(e,r){var n=this;return this.resourceService.customQuery(this.type,e,this.resource,this._embedded,r).pipe(h.mergeMap(function(t){return r&&r.notPaged&&!a.isNullOrUndefined(t.first_uri)?(r.notPaged=!1,r.size=t.totalElements,n.customQuery(e,r)):(n.resourceArray=t,c.of(t.result))}))},e.prototype.getByRelationArray=function(t,e){var r=this;return this.resourceService.getByRelationArray(this.type,t,this._embedded,e).pipe(h.map(function(t){return(r.resourceArray=t).result}))},e.prototype.getByRelation=function(t){return this.resourceService.getByRelation(this.type,t)},e.prototype.count=function(){return this.resourceService.count(this.resource)},e.prototype.create=function(t){return this.resourceService.create(this.resource,t)},e.prototype.update=function(t){return this.resourceService.update(t)},e.prototype.patch=function(t){return this.resourceService.patch(t)},e.prototype["delete"]=function(t){return this.resourceService["delete"](t)},e.prototype.totalElement=function(){return this.resourceArray&&this.resourceArray.totalElements?this.resourceArray.totalElements:0},e.prototype.hasFirst=function(){return!!this.resourceArray&&this.resourceService.hasFirst(this.resourceArray)},e.prototype.hasNext=function(){return!!this.resourceArray&&this.resourceService.hasNext(this.resourceArray)},e.prototype.hasPrev=function(){return!!this.resourceArray&&this.resourceService.hasPrev(this.resourceArray)},e.prototype.hasLast=function(){return!!this.resourceArray&&this.resourceService.hasLast(this.resourceArray)},e.prototype.next=function(){var e=this;if(this.resourceArray)return this.resourceService.next(this.resourceArray,this.type).pipe(h.map(function(t){return(e.resourceArray=t).result}));c.throwError("no resourceArray found")},e.prototype.prev=function(){var e=this;if(this.resourceArray)return this.resourceService.prev(this.resourceArray,this.type).pipe(h.map(function(t){return(e.resourceArray=t).result}));c.throwError("no resourceArray found")},e.prototype.first=function(){var e=this;if(this.resourceArray)return this.resourceService.first(this.resourceArray,this.type).pipe(h.map(function(t){return(e.resourceArray=t).result}));c.throwError("no resourceArray found")},e.prototype.last=function(){var e=this;if(this.resourceArray)return this.resourceService.last(this.resourceArray,this.type).pipe(h.map(function(t){return(e.resourceArray=t).result}));c.throwError("no resourceArray found")},e.prototype.page=function(t){var e=this;if(this.resourceArray)return this.resourceService.page(this.resourceArray,this.type,t).pipe(h.map(function(t){return(e.resourceArray=t).result}));c.throwError("no resourceArray found")},e}(),A=function(n){function t(t,e){var r=n.call(this,g,"account",t)||this;return r.http=e,r.ACCOUNT_API="account",r}return p(t,n),t.prototype.get=function(){return this.http.get(this.resourceService.getResourceUrl(this.ACCOUNT_API))},t.prototype.save=function(t){return this.http.post(this.resourceService.getResourceUrl(this.ACCOUNT_API),t)},t.prototype.changePassword=function(t){return this.http.post(this.resourceService.getResourceUrl(this.ACCOUNT_API+"/change-password"),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),R=function(){function t(t,e){this.http=t,this.resourceService=e,this.AUTH_API="authenticate"}return t.prototype.getToken=function(){return sessionStorage.getItem("authenticationToken")},t.prototype.login=function(t){var e={username:t.username,password:t.password};return this.http.post(this.resourceService.getResourceUrl(this.AUTH_API),e,{observe:"response"}).map(function r(t){if(t.ok){var e=t.body.id_token;return this.storeAuthenticationToken(e),e}}.bind(this))},t.prototype.loginWithToken=function(t){return t?(this.storeAuthenticationToken(t),Promise.resolve(t)):Promise.reject("auth-jwt-service Promise reject")},t.prototype.storeAuthenticationToken=function(t){sessionStorage.setItem("authenticationToken",t)},t.prototype.isLoggedIn=function(){return this.getToken()},t.prototype.isLoggedOut=function(){return!this.isLoggedIn()},t.prototype.logout=function(){return new r.Observable(function(t){sessionStorage.removeItem("authenticationToken"),t.complete()})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:l.HttpClient},{type:k}]},t}(),m=function(){function t(){}return t.prototype.intercept=function(t,e){if(!t||!t.url||!t.url.includes("api"))return e.handle(t);var r=sessionStorage.getItem("authenticationToken");return r&&(t=t.clone({setHeaders:{Authorization:"Bearer "+r}})),e.handle(t)},t}(),P=function(){function t(t){this.account=t,this.authenticated=!1,this.authenticationState=new c.Subject}return t.prototype.authenticate=function(t){this.userIdentity=t,this.authenticated=null!==t,this.authenticationState.next(this.userIdentity)},t.prototype.hasAnyAuthority=function(t){return Promise.resolve(this.hasAnyAuthorityDirect(t))},t.prototype.hasAnyAuthorityOnTerritory=function(t,e){return Promise.resolve(this.hasAnyAuthorityDirectOnTerritory(t,e))},t.prototype.hasAnyAuthorityDirect=function(t){if(!this.authenticated||!this.userIdentity||!this.userIdentity.authorities)return!1;for(var e=0;e<t.length;e++)if(this.userIdentity.authorities.includes(t[e]))return!0;return!1},t.prototype.hasAnyAuthorityDirectOnTerritory=function(t,e){if(!this.authenticated||!this.userIdentity||!this.userIdentity.authorities)return!1;for(var r=0;r<t.length;r++)if(this.userIdentity.authoritiesPerTerritory[e]&&this.userIdentity.authoritiesPerTerritory[e].includes(t[r]))return!0;return!1},t.prototype.hasAuthority=function(e){return this.authenticated?this.identity().then(function(t){return Promise.resolve(t.authorities&&t.authorities.includes(e))},function(){return Promise.resolve(!1)}):Promise.resolve(!1)},t.prototype.hasAuthorityOnTerritory=function(e,r){return this.authenticated?this.identity().then(function(t){return Promise.resolve(t.authoritiesPerTerritory&&t.authoritiesPerTerritory[r]&&t.authoritiesPerTerritory[r].includes(e))},function(){return Promise.resolve(!1)}):Promise.resolve(!1)},t.prototype.identity=function(t){var r=this;return!0===t&&(this.userIdentity=undefined),this.userIdentity?Promise.resolve(this.userIdentity):this.account.get().toPromise().then(function(t){var e=t;return e?(r.userIdentity=e,r.authenticated=!0):(r.userIdentity=null,r.authenticated=!1),r.authenticationState.next(r.userIdentity),r.userIdentity})["catch"](function(t){return r.userIdentity=null,r.authenticated=!1,r.authenticationState.next(r.userIdentity),null})},t.prototype.isAuthenticated=function(){return this.authenticated},t.prototype.isIdentityResolved=function(){return this.userIdentity!==undefined},t.prototype.getAuthenticationState=function(){return this.authenticationState.asObservable()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:A}]},t}(),S=function(){function t(t,e,r){this.router=t,this.authService=e,this.principal=r}return t.prototype.intercept=function(t,e){var r=this;return e.handle(t)["do"](function(t){},function(t){t instanceof l.HttpErrorResponse&&401===t.status&&(r.authService.logout().subscribe(),r.principal.authenticate(null),r.router.navigate(["/"]))})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:n.Router},{type:R},{type:P}]},t}(),C=function(){function t(t,e){this.authServerProvider=t,this.principal=e}return t.prototype.login=function(t,e){var n=this,i=e||function(){};return new Promise(function(r,e){n.authServerProvider.login(t).subscribe(function(e){return n.principal.identity(!0).then(function(t){r(e)}),i()},function(t){return n.logout(),e(t),i(t)})})},t.prototype.loginWithToken=function(t){return this.authServerProvider.loginWithToken(t)},t.prototype.logout=function(){this.authServerProvider.logout().subscribe(),this.principal.authenticate(null)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:R},{type:P}]},t}(),E=function(){function t(t,e){this.http=t,this.resourceService=e,this.DASHBOARD_API="dashboard/info",this.DASHBOARD_EMBEDDED="dashboard"}return t.prototype.getAll=function(){var e=this;return this.http.get(this.resourceService.getResourceUrl(this.DASHBOARD_API)).map(function(t){return t[e.DASHBOARD_EMBEDDED]})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:l.HttpClient},{type:k}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(l.HttpClient),e.inject(k))},token:t,providedIn:"root"}),t}(),T=function(n){function t(t,e){var r=n.call(this,g,"users",t)||this;return r.http=e,r.USER_API="users",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.USER_API),t)},t.prototype.changePassword=function(t,e){return this.http.post(this.resourceService.getResourceUrl(this.USER_API+"/"+t+"/change-password"),e)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),j=function(n){function t(t,e){var r=n.call(this,O,"user-positions",t)||this;return r.http=e,r.USER_POSITION_API="user-positions",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.user&&t.substituteRelation("user",t.user).subscribe(function(t){},function(t){return console.error(t)}),null!=t.territory&&t.substituteRelation("territory",t.territory).subscribe(function(t){},function(t){return console.error(t)})):(t.territory=t.territory._links.self.href,t.user=t.user._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.USER_POSITION_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),x=function(n){function t(t,e){var r=n.call(this,U,"user-configurations",t)||this;return r.http=e,r.USER_CONFIGURATION_API="user-configurations",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.user&&t.substituteRelation("user",t.user).subscribe(function(t){},function(t){return console.error(t)}),null!=t.territory&&t.substituteRelation("territory",t.territory).subscribe(function(t){},function(t){return console.error(t)}),null!=t.role&&t.substituteRelation("role",t.role).subscribe(function(t){},function(t){return console.error(t)}),null!=t.roleChildren&&t.substituteRelation("roleChildren",t.roleChildren).subscribe(function(t){},function(t){return console.error(t)})):(t.territory=t.territory._links.self.href,t.role=null!=t.role?t.role._links.self.href:null,t.user=t.user._links.self.href,t.roleChildren=null!=t.roleChildren?t.roleChildren._links.self.href:null,e=this.http.post(this.resourceService.getResourceUrl(this.USER_CONFIGURATION_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),H=function(n){function t(t,e){var r=n.call(this,w,"territories",t)||this;return r.http=e,r.TERRITORY_API="territories",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e={_links:{}};return e._links.self={},e._links.self.href="",null!=t.groupType&&(e=t.groupType,"undefined"!=typeof t.groupType._links&&(t.groupType=t.groupType._links.self.href)),null!=t._links?(delete t.groupType,""==e._links.self.href?t.deleteRelation("groupType",e).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("groupType",e).subscribe(function(t){},function(t){return console.error(t)}),null!=t.type&&(t.type=t.type._links.self.href),this.http.put(t._links.self.href,t)):this.http.post(this.resourceService.getResourceUrl(this.TERRITORY_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),N=function(n){function t(t,e){var r=n.call(this,L,"territory-types",t)||this;return r.http=e,r.TERRITORYTYPE_API="territory-types",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.TERRITORYTYPE_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),M=function(n){function t(t,e){var r=n.call(this,G,"territory-group-types",t)||this;return r.http=e,r.TERRITORYGROUPTYPE_API="territory-group-types",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.TERRITORYGROUPTYPE_API),t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.INJECTOR),e.inject(l.HttpClient))},token:t,providedIn:"root"}),t}(I),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),D=function(n){function t(t,e){var r=n.call(this,B,"roles",t)||this;return r.http=e,r.ROLE_API="roles",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.ROLE_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),V=function(n){function t(t,e){var r=n.call(this,Y,"connections",t)||this;return r.http=e,r.CONNECTION_API="connections",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API),t)},t.prototype.testConnection=function(t){return this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API)+"/test",t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),q=function(n){function t(t,e){var r=n.call(this,z,"tasks",t)||this;return r.http=e,r.CONNECTION_API="tasks",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){t.type,t.group,t.connection,t.ui;return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),K=function(n){function t(t,e){var r=n.call(this,F,"task-types",t)||this;return r.http=e,r.CONNECTION_API="task-types",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),Q=function(n){function t(t,e){var r=n.call(this,W,"task-groups",t)||this;return r.http=e,r.CONNECTION_API="task-groups",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),X=function(n){function t(t,e){var r=n.call(this,J,"task-parameters",t)||this;return r.http=e,r.TASK_PARAMETER_API="task-parameters",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.task&&t.substituteRelation("task",t.task).subscribe(function(t){},function(t){return console.error(t)})):(t.task=t.task._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.TASK_PARAMETER_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),$=function(n){function t(t,e){var r=n.call(this,Z,"task-availabilities",t)||this;return r.http=e,r.TASK_AVAILABILITY_API="task-availabilities",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.task&&t.substituteRelation("task",t.task).subscribe(function(t){},function(t){return console.error(t)}),null!=t.territory&&t.substituteRelation("territory",t.territory).subscribe(function(t){},function(t){return console.error(t)})):(t.territory=t.territory._links.self.href,t.task=t.task._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.TASK_AVAILABILITY_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),et=function(n){function t(t,e){var r=n.call(this,tt,"task-uis",t)||this;return r.http=e,r.CONNECTION_API="task-uis",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CONNECTION_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),nt=function(n){function t(t,e){var r=n.call(this,rt,"translations",t)||this;return r.http=e,r.TRANSLATION_API="translations",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e={_links:{}};return e._links.self={},e._links.self.href="",null!=t.language&&(e=t.language,"undefined"!=typeof t.language._links&&(t.language=t.language._links.self.href)),null!=t._links?(delete t.language,this.http.put(t._links.self.href,t)):this.http.post(this.resourceService.getResourceUrl(this.TRANSLATION_API),t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.INJECTOR),e.inject(l.HttpClient))},token:t,providedIn:"root"}),t}(I),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),ot=function(n){function t(t,e){var r=n.call(this,it,"languages",t)||this;return r.http=e,r.LANGUAGES_API="languages",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.LANGUAGES_API),t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.INJECTOR),e.inject(l.HttpClient))},token:t,providedIn:"root"}),t}(I),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),ut=function(n){function t(t,e){var r=n.call(this,st,"services",t)||this;return r.http=e,r.SERVICE_API="services",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e=t.connection;return null!=t.connection&&("undefined"!=typeof t.connection._links?t.connection=t.connection._links.self.href:(e._links={},e._links.self={},e._links.self.href="")),null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.SERVICE_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),ct=function(n){function t(t,e){var r=n.call(this,at,"service-parameters",t)||this;return r.http=e,r.SERVICE_PARAMETER_API="service-parameters",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;if(null!=t._links){if(null!=t.service){var r=t.service;delete t.service,t.substituteRelation("service",r).subscribe(function(t){},function(t){return console.error(t)})}e=this.http.put(t._links.self.href,t)}else t.service=t.service._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.SERVICE_PARAMETER_API),t);return e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),pt=function(n){function t(t,e){var r=n.call(this,lt,"cartographies",t)||this;return r.http=e,r.CARTOGRAPHY_API="cartographies",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e={_links:{}};e._links.self={},e._links.self.href="";var r={_links:{}};r._links.self={},r._links.self.href="";var n={_links:{}};return n._links.self={},n._links.self.href="",null!=t.service&&(r=t.service,"undefined"!=typeof t.service._links&&(t.service=t.service._links.self.href)),null!=t.selectionService&&(n=t.selectionService,"undefined"!=typeof t.selectionService._links&&(t.selectionService=t.selectionService._links.self.href)),null!=t.connection&&(e=t.connection,"undefined"!=typeof t.connection._links&&(t.connection=t.connection._links.self.href)),null!=t._links?(delete t.connection,delete t.service,delete t.selectionService,""==e._links.self.href?t.deleteRelation("spatialSelectionConnection",e).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("spatialSelectionConnection",e).subscribe(function(t){},function(t){return console.error(t)}),""==r._links.self.href?t.deleteRelation("service",r).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("service",r).subscribe(function(t){},function(t){return console.error(t)}),""==n._links.self.href?t.deleteRelation("spatialSelectionService",n).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("spatialSelectionService",n).subscribe(function(t){},function(t){return console.error(t)}),this.http.put(t._links.self.href,t)):this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),ft=function(n){function t(t,e){var r=n.call(this,ht,"cartography-groups",t)||this;return r.http=e,r.CARTOGRAPHY_GROUP_API="cartography-groups",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_GROUP_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),dt=function(n){function t(t,e){var r=n.call(this,yt,"cartography-availabilities",t)||this;return r.http=e,r.CARTOGRAPHY_AVAILABILITY_API="cartography-availabilities",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.cartography&&t.substituteRelation("cartography",t.cartography).subscribe(function(t){},function(t){return console.error(t)}),null!=t.territory&&t.substituteRelation("territory",t.territory).subscribe(function(t){},function(t){return console.error(t)})):(t.territory=t.territory._links.self.href,t.cartography=t.cartography._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_AVAILABILITY_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),gt=function(n){function t(t,e){var r=n.call(this,vt,"cartography-filters",t)||this;return r.http=e,r.CARTOGRAPHY_FILTER_API="cartography-filters",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.cartography&&t.substituteRelation("cartography",t.cartography).subscribe(function(t){},function(t){return console.error(t)}),null!=t.territorialLevel&&t.territorialLevel!=undefined&&t.substituteRelation("territorialLevel",t.territorialLevel).subscribe(function(t){},function(t){return console.error(t)})):(t.cartography=t.cartography._links.self.href,t.territorialLevel=t.territorialLevel._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_FILTER_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),bt=function(n){function t(t,e){var r=n.call(this,_t,"cartography-parameters",t)||this;return r.http=e,r.CARTOGRAPHY_PARAMETER_API="cartography-parameters",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;if(null!=t._links){if(null!=t.cartography){var r=t.cartography;delete t.cartography,t.substituteRelation("cartography",r).subscribe(function(t){},function(t){return console.error(t)})}e=this.http.put(t._links.self.href,t)}else t.cartography=t.cartography._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.CARTOGRAPHY_PARAMETER_API),t);return e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),It=function(n){function t(t,e){var r=n.call(this,kt,"backgrounds",t)||this;return r.http=e,r.BACKGROUND_API="backgrounds",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e={_links:{}};return e._links.self={},e._links.self.href="",t.cartographyGroup,null!=t.cartographyGroup&&(e=t.cartographyGroup,"undefined"!=typeof t.cartographyGroup._links&&(t.cartographyGroup=t.cartographyGroup._links.self.href)),null!=t._links?(delete t.cartographyGroup,""==e._links.self.href?t.deleteRelation("cartographyGroup",e).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("cartographyGroup",e).subscribe(function(t){},function(t){return console.error(t)}),this.http.put(t._links.self.href,t)):this.http.post(this.resourceService.getResourceUrl(this.BACKGROUND_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),Rt=function(n){function t(t,e){var r=n.call(this,At,"trees",t)||this;return r.http=e,r.TREE_API="trees",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.TREE_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),Pt=function(n){function t(t,e){var r=n.call(this,mt,"tree-nodes",t)||this;return r.http=e,r.TREE_NODE_API="tree-nodes",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;if(null!=t._links){var r=t.tree,n=t.cartography,i=t.parent;if(delete t.tree,delete t.cartography,delete t.parent,e=this.http.put(t._links.self.href,t),null!=r&&t.substituteRelation("tree",r).subscribe(function(t){},function(t){return console.error(t)}),null!=n&&t.substituteRelation("cartography",n).subscribe(function(t){},function(t){return console.error(t)}),null!=i)t.substituteRelation("parent",i).subscribe(function(t){},function(t){return console.error(t)});else{var o={_links:{}};o._links.self={},o._links.self.href="",t.deleteRelation("parent",o).subscribe(function(t){},function(t){return console.error(t)})}}else t.tree&&t.tree._links&&t.tree._links.self&&(t.tree=t.tree._links.self.href),t.cartography&&t.cartography._links&&t.cartography._links.self&&(t.cartography=t.cartography._links.self.href),e=this.http.post(this.resourceService.getResourceUrl(this.TREE_NODE_API),t);return e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),Ct=function(n){function t(t,e){var r=n.call(this,St,"applications",t)||this;return r.http=e,r.APPLICATION_API="applications",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e={_links:{}};return e._links.self={},e._links.self.href="",null!=t.situationMap&&(e=t.situationMap,"undefined"!=typeof t.situationMap._links&&(t.situationMap=t.situationMap._links.self.href)),null!=t._links?(delete t.situationMap,""==e._links.self.href?t.deleteRelation("situationMap",e).subscribe(function(t){},function(t){return console.error(t)}):t.substituteRelation("situationMap",e).subscribe(function(t){},function(t){return console.error(t)}),this.http.put(t._links.self.href,t)):this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),Tt=function(n){function t(t,e){var r=n.call(this,Et,"application-backgrounds",t)||this;return r.http=e,r.APPLICATION_BACKGROUND_API="application-backgrounds",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.application&&t.substituteRelation("application",t.application).subscribe(function(t){},function(t){return console.error(t)}),null!=t.background&&t.substituteRelation("background",t.background).subscribe(function(t){},function(t){return console.error(t)})):(t.application=t.application._links.self.href,t.background=t.background._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_BACKGROUND_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),jt=function(n){function t(t,e){var r=n.call(this,Ot,"application-parameters",t)||this;return r.http=e,r.APPLICATION_PARAMETER_API="application-parameters",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){var e;return null!=t._links?(e=this.http.put(t._links.self.href,t),null!=t.application&&t.substituteRelation("application",t.application).subscribe(function(t){},function(t){return console.error(t)})):(t.application=t.application._links.self.href,e=this.http.post(this.resourceService.getResourceUrl(this.APPLICATION_PARAMETER_API),t)),e},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(v),xt=function(n){function t(t,e){var r=n.call(this,Ut,"codelist-values",t)||this;return r.http=e,r.CODELIST_API="codelist-values",r}return p(t,n),t.prototype.remove=function(t){return this.http["delete"](t._links.self.href)},t.prototype.save=function(t){return null!=t._links?this.http.put(t._links.self.href,t):this.http.post(this.resourceService.getResourceUrl(this.CODELIST_API),t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:l.HttpClient}]},t}(I),wt=function Kt(){this.visibility=!1,this.opacity=1,this.attributions="",this.desc="",this.url_transparent="true",this.url_bgcolor="0x000000",this.extent=null,this.queryable=!1},Ht=function Wt(){},Lt=function Qt(){},Nt=function Jt(){},Gt=function Xt(){},Mt=function Zt(){this.loaded=!1},Bt=function(){function t(){this.layersSubject=new c.BehaviorSubject([]),this.layers=null,this.baseLayerGroupsSubject=new c.BehaviorSubject([]),this.baseLayerGroups=null,this.layerConfigurationSubject=new c.BehaviorSubject([]),this.addLayersSubject=new c.BehaviorSubject([]),this.removeLayersSubject=new c.BehaviorSubject([]),this.situationMapConfigurationSubject=new c.BehaviorSubject([]),this.mapOptionsConfigurationSubject=new c.BehaviorSubject([]),this.mapComponentStatusSubject=new c.BehaviorSubject([]),this.count=0}return t.prototype.loadLayersConfiguration=function(t){null!=this.layers&&this.clearLayers(!1),this.setLayers(t)},t.prototype.loadBaseLayersConfiguration=function(t){this.setBaseLayerGroups(t)},t.prototype.getBaseLayerGroups=function(){return this.baseLayerGroupsSubject.asObservable()},t.prototype.setBaseLayerGroups=function(t){this.baseLayerGroups=t,this.refreshBaseLayerGroups()},t.prototype.refreshBaseLayerGroups=function(){this.baseLayerGroupsSubject.next(this.baseLayerGroups)},t.prototype.getLayers=function(){return this.layersSubject.asObservable()},t.prototype.clearLayers=function(t){for(;this.layers.length;)this.layers.pop();t&&this.refreshLayers()},t.prototype.setLayers=function(t){this.layers=t,this.refreshLayers()},t.prototype.addLayer=function(t){this.layers.push(t),this.refreshAddLayers(t)},t.prototype.addLayerAt=function(t,e){0==e?this.layers=[t].concat(this.layers):e>=this.layers.length?this.layers.push(t):this.layers=this.layers.slice(0,e).concat([t]).concat(this.layers.slice(e,this.layers.length)),this.refreshAddLayers(t),this.refreshLayerConfiguration(t.id,null,null,e)},t.prototype.removeLayer=function(t){var e=this.layers.indexOf(t);this.removeLayerIndex(e)},t.prototype.removeLayerId=function(t){for(var e=-1,r=0,n=this.layers.length;r<n;r++)if(this.layers[r].id==t){e=r;break}this.removeLayerIndex(e)},t.prototype.removeLayerIndex=function(t){var e=this.layers[t];this.layers.splice(t,1),this.refreshRemoveLayers(e)},t.prototype.refreshLayers=function(){this.layersSubject.next(this.layers)},t.prototype.getLayersAdded=function(){return this.addLayersSubject.asObservable()},t.prototype.refreshAddLayers=function(t){this.addLayersSubject.next([t])},t.prototype.getLayersRemoved=function(){return this.removeLayersSubject.asObservable()},t.prototype.refreshRemoveLayers=function(t){this.removeLayersSubject.next([t])},t.prototype.getLayerConfigurationListener=function(){return this.layerConfigurationSubject.asObservable()},t.prototype.getLayerIndexById=function(t){for(var e=-1,r=0,n=this.layers.length;r<n;r++)if(this.layers[r].id==t){e=r;break}return e},t.prototype.moveLayer=function(t,e){var r=this.getLayerIndexById(t);if(-1!=r){var n=this.layers.splice(r,1);this.layers=this.layers.slice(0,e).concat(n).concat(this.layers.slice(e,this.layers.length))}this.refreshLayerConfiguration(t,null,null,e)},t.prototype.changeLayerVisibility=function(t,e){this.refreshLayerConfiguration(t,null,e,null)},t.prototype.changeLayerOpacity=function(t,e){this.refreshLayerConfiguration(t,e,null,null)},t.prototype.refreshLayerConfiguration=function(t,e,r,n){var i=new Lt;i.id=t,i.opacity=e,i.visibility=r,i.position=n,this.layerConfigurationSubject.next([i])},t.prototype.getSituationMapConfigurationListener=function(){return this.situationMapConfigurationSubject.asObservable()},t.prototype.loadSituationMapConfiguration=function(t){this.situationMapConfigurationSubject.next(t)},t.prototype.getMapOptionsConfigurationListener=function(){return this.mapOptionsConfigurationSubject.asObservable()},t.prototype.loadMapOptionsConfiguration=function(t){this.mapOptionsConfigurationSubject.next([t])},t.prototype.getMapComponentStatusListener=function(){return this.mapComponentStatusSubject.asObservable()},t.prototype.setMapComponentStatus=function(t){this.mapComponentStatusSubject.next([t])},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Dt=function(){function t(t,e,r){this.principal=t,this.templateRef=e,this.viewContainerRef=r}return Object.defineProperty(t.prototype,"sitmunHasAnyAuthority",{set:function(t){var e=this;this.authorities="string"==typeof t?[t]:t,this.updateView(),this.principal.getAuthenticationState().subscribe(function(t){return e.updateView()})},enumerable:!0,configurable:!0}),t.prototype.updateView=function(){var e=this;this.territory?this.principal.hasAnyAuthorityOnTerritory(this.authorities,this.territory).then(function(t){e.viewContainerRef.clear(),t&&e.viewContainerRef.createEmbeddedView(e.templateRef)}):this.principal.hasAnyAuthority(this.authorities).then(function(t){e.viewContainerRef.clear(),t&&e.viewContainerRef.createEmbeddedView(e.templateRef)})},t.decorators=[{type:e.Directive,args:[{selector:"[sitmunHasAnyAuthority]"}]}],t.ctorParameters=function(){return[{type:P},{type:e.TemplateRef},{type:e.ViewContainerRef}]},t.propDecorators={territory:[{type:e.Input}],sitmunHasAnyAuthority:[{type:e.Input}]},t}(),Yt=function(){function t(t,e,r){this.principal=t,this.templateRef=e,this.viewContainerRef=r}return Object.defineProperty(t.prototype,"sitmunHasAnyAuthorityOnTerritory",{set:function(t){var e=this;this.authorities="string"==typeof t.authorities?[t.authorities]:t.authorities,this.territory=t.territory,this.updateView(),this.principal.getAuthenticationState().subscribe(function(t){return e.updateView()})},enumerable:!0,configurable:!0}),t.prototype.updateView=function(){var e=this;this.territory?this.principal.hasAnyAuthorityOnTerritory(this.authorities,this.territory).then(function(t){e.viewContainerRef.clear(),t&&e.viewContainerRef.createEmbeddedView(e.templateRef)}):this.principal.hasAnyAuthority(this.authorities).then(function(t){e.viewContainerRef.clear(),t&&e.viewContainerRef.createEmbeddedView(e.templateRef)})},t.decorators=[{type:e.Directive,args:[{selector:"[sitmunHasAnyAuthorityOnTerritory]"}]}],t.ctorParameters=function(){return[{type:P},{type:e.TemplateRef},{type:e.ViewContainerRef}]},t.propDecorators={sitmunHasAnyAuthorityOnTerritory:[{type:e.Input}]},t}();function Vt(t){return new i.TranslateHttpLoader(t,"./assets/i18n/",".json")}var zt=Vt,qt=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[xt,H,N,M,D,A,R,T,V,q,K,et,Q,X,$,ut,ct,pt,ft,dt,bt,gt,It,Rt,Pt,Ct,jt,Tt,m,S,P,j,x,C,nt,ot,E,Bt,{provide:l.HTTP_INTERCEPTORS,useClass:m,multi:!0},{provide:l.HTTP_INTERCEPTORS,useClass:S,multi:!0}]}},t.decorators=[{type:e.NgModule,args:[{imports:[o.TranslateModule.forRoot({loader:{provide:o.TranslateLoader,useFactory:zt,deps:[l.HttpClient]}})],declarations:[Dt,Yt],exports:[Dt,Yt,o.TranslateModule]}]}],t}(),Ft=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[_,l.HttpClient,{provide:k,useClass:k,deps:[_]}]}},t.decorators=[{type:e.NgModule,args:[{imports:[l.HttpClientModule],declarations:[],exports:[l.HttpClientModule],providers:[_,l.HttpClient,{provide:k,useClass:k,deps:[_]}]}]}],t}();t.AccountService=A,t.AuthService=R,t.AuthInterceptor=m,t.AuthExpiredInterceptor=S,t.LoginService=C,t.Principal=P,t.DashboardService=E,t.User=g,t.UserService=T,t.UserPosition=O,t.UserPositionService=j,t.UserConfiguration=U,t.UserConfigurationService=x,t.Territory=w,t.TerritoryService=H,t.TerritoryType=L,t.TerritoryTypeService=N,t.TerritoryGroupType=G,t.TerritoryGroupTypeService=M,t.Role=B,t.RoleService=D,t.Connection=Y,t.ConnectionService=V,t.GEOADMIN_TREE_TASK_ID="geoadmin",t.Task=z,t.TaskService=q,t.TaskType=F,t.TaskTypeService=K,t.TaskGroup=W,t.TaskGroupService=Q,t.TaskParameter=J,t.TaskParameterService=X,t.TaskAvailability=Z,t.TaskAvailabilityService=$,t.TaskUI=tt,t.TaskUIService=et,t.TranslationService=nt,t.Translation=rt,t.Language=it,t.LanguageService=ot,t.Service=st,t.ServiceService=ut,t.ServiceParameter=at,t.ServiceParameterService=ct,t.Cartography=lt,t.CartographyService=pt,t.CartographyGroup=ht,t.CartographyGroupService=ft,t.CartographyAvailability=yt,t.CartographyAvailabilityService=dt,t.CartographyFilter=vt,t.CartographyFilterService=gt,t.CartographyParameter=_t,t.CartographyParameterService=bt,t.Background=kt,t.BackgroundService=It,t.Tree=At,t.TreeService=Rt,t.TreeNode=mt,t.TreeNodeService=Pt,t.TERRITORIAL_APP_NAME="Aplicacin Territorial",t.Application=St,t.ApplicationService=Ct,t.ApplicationBackground=Et,t.ApplicationBackgroundService=Tt,t.ApplicationParameter=Ot,t.ApplicationParameterService=jt,t.CodeList=Ut,t.CodeListService=xt,t.Layer=wt,t.OptionalParameter=Ht,t.LayerConfiguration=Lt,t.LayerGroup=Nt,t.MapOptionsConfiguration=Gt,t.MapComponentStatus=Mt,t.MapConfigurationManagerService=Bt,t.createTranslateLoader=Vt,t.SitmunFrontendCoreModule=qt,t.ExternalService=_,t.RestService=I,t.Resource=v,t.ResourceArray=y,t.ResourceService=k,t.ResourceHelper=d,t.AngularHalModule=Ft,t.b=Yt,t.a=Dt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=sitmun-frontend-core.umd.min.js.map