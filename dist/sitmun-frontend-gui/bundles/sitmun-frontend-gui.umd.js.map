{"version":3,"file":"sitmun-frontend-gui.umd.js.map","sources":["ng://@sitmun/frontend-gui/data-grid/data-grid.component.ts","ng://@sitmun/frontend-gui/sitmun-frontend-gui.module.ts"],"sourcesContent":["import { AgGridModule } from '@ag-grid-community/angular';\nimport { Component, OnInit, NgModule, Input, Output, EventEmitter } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AllCommunityModules, Module } from '@ag-grid-community/all-modules';\n\n\n\n\n\n\n@Component({\n  selector: 'app-data-grid',\n  template: `<div class=\"container\" style=\"margin: 50px;\"  >\n\n\n    \n\n    <div class=\"row\">\n        <div class=\"text-left\" >\n            <label>Search </label>\n            <input type=\"text\" placeholder=\"\" (keyup)=\"quickSearch()\" [(ngModel)]=\"searchValue\" ml-2 >\n            \n        </div>\n\n\n        <div class=\" text-right btn-group-sm\">\n            <button class=\"btn btn-danger\"  (click)=\"deleteChanges()\" [disabled]=\"comptadorCanvis <= 0\">Delete Changes</button>\n            <button class=\"btn btn-warning\" (click)=\"undo()\" [disabled]=\"comptadorCanvis <= 0\" >Undo</button>\n            <button class=\"btn btn-warning\" (click)=\"redo()\" [disabled]=\"comptadorRedo <= 0\">Redo</button>\n            <button class=\"btn btn-success\" (click)=\"applyChanges()\" [disabled]=\"comptadorCanvis <= 0\" >Apply Changes</button>\n        </div>\n\n        \n        <div class=\" text-right btn-group-sm\">\n            <button class=\"btn btn-secondary\" (click)=\"removeData()\">Remove</button>\n            <button class=\"btn btn-success\" (click)=\"newData()\">New</button>\n        </div>\n\n\n    </div>\n\n    <div class=\"row\">\n        <div class=\"ag-theme-balham\" id=\"myGrid\" >\n            <ag-grid-angular\n            style=\" width: 750px; height: 500px;\"\n            class=\"ag-theme-balham\"\n            [floatingFilter]=\"true\"\n            [rowData]=\"rowData\"\n            [columnDefs]=\"columnDefs\"\n            [animateRows]=\"true\"\n            [pagination]=\"false\"\n            [modules]=\"modules\"     \n            [undoRedoCellEditing]=\"true\"    \n            [undoRedoCellEditingLimit]= 200\n            [suppressRowClickSelection]=true\n            [enableCellChangeFlash]=true\n            rowSelection=\"multiple\"\n            (cellEditingStopped)=\"onCellEditingStopped($event)\"\n            (gridReady)=\"onGridReady($event)\">\n            </ag-grid-angular>\n        </div>\n    </div>\n</div>\n\n`,\n  styles: [`label{display:inline-block;margin-right:5px;margin-left:5px;margin-top:5px}`]\n})\nexport class DataGridComponent implements OnInit {\n  modules: Module[] = AllCommunityModules;\n  searchValue: string;\n  private gridApi;\n  private gridColumnApi;\n  set: Set<string> = new Set<string>();\n  rowData: any[];\n  comptadorCanvis: number;\n  comptadorRedo: number;\n  @Input() columnDefs: any[];\n  @Input() getAll: () => Observable<any>;\n  @Output() remove: EventEmitter<any[]>;\n  @Output() new: EventEmitter<boolean>;\n  @Output() sendChanges: EventEmitter<any[]>;\n\n\n  constructor() {\n\n    this.remove = new EventEmitter();\n    this.new = new EventEmitter();\n    this.sendChanges = new EventEmitter();\n    this.comptadorCanvis = 0;\n    this.comptadorRedo = 0;\n  }\n\n  \n  ngOnInit() {\n  }\n\n  onGridReady(params){\n    this.gridApi = params.api;\n    this.gridColumnApi = params.columnApi;\n    this.gridApi.rowHeight = 100;\n    this.getElements();\n    this.gridApi.sizeColumnsToFit();\n\n  }\n\n  quickSearch(){\n      this.gridApi.setQuickFilter(this.searchValue);\n  }\n\n  getElements()\n  {\n    this.getAll()\n    .subscribe((items) => {\n        console.log(items);\n        this.rowData = items;\n    });\n  }\n\n  removeData() {\n    this.gridApi.stopEditing(false);\n    const selectedNodes = this.gridApi.getSelectedNodes();\n  \tconst selectedData = selectedNodes.map(node => node.data);\n    this.remove.emit(selectedData);\n}\n\n  newData()\n  {\n    this.gridApi.stopEditing(false);\n    this.new.emit(true);\n  }\n\n  applyChanges()\n  {\n    const itemsChanged: any[] =[];\n    this.gridApi.stopEditing(false);\n    this.set.forEach( id => itemsChanged.push(this.gridApi.getRowNode(id).data));\n    this.sendChanges.emit(itemsChanged);\n    this.set.clear();\n    this.comptadorCanvis=0;\n    this.comptadorRedo=0;\n  }\n\n\n  onCellEditingStopped(e)\n  {\n    this.set.add(e.node.id);\n    this.comptadorCanvis += 1;\n    this.comptadorRedo=0;\n  }\n\n  deleteChanges()\n  {\n    for(let i = 0; i <= this.comptadorCanvis; i++)\n    {\n      this.gridApi.undoCellEditing();\n    }\n    this.set.clear();\n    this.comptadorCanvis = 0;\n    this.comptadorRedo=0;\n  }\n\n\n\n  undo() {\n    this.gridApi.stopEditing(false);\n    this.gridApi.undoCellEditing();\n    if (this.comptadorCanvis > 0) \n    { this.comptadorCanvis -= 1;\n      this.comptadorRedo += 1;\n     }\n  }\n\n  redo() {\n    this.gridApi.stopEditing(false);\n    this.gridApi.redoCellEditing();\n    this.comptadorCanvis += 1;\n    this.comptadorRedo -= 1;\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\r\n\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport {HttpClientModule, HttpClient, HTTP_INTERCEPTORS} from '@angular/common/http';\r\nimport { BrowserAnimationsModule, NoopAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\n//import * as ol from 'openlayers';\r\nimport {TranslateModule, TranslateLoader,TranslateService} from '@ngx-translate/core';\r\n\r\n\r\nimport { AngularHalModule } from '@sitmun/frontend-core';\r\n\r\n\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport {SitmunFrontendCoreModule} from '@sitmun/frontend-core';\r\nimport { DataGridComponent } from './data-grid/data-grid.component';\r\nimport { AgGridModule } from '@ag-grid-community/angular';\r\n\r\n\r\n\r\n\r\n/** SITMUN plugin core module */\r\n@NgModule({\r\n  imports: [\r\n    RouterModule,\r\n    HttpClientModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    NoopAnimationsModule,\r\n    AngularHalModule,\r\n    ReactiveFormsModule,\r\n    BrowserAnimationsModule,\r\n    AgGridModule.withComponents([]),\r\n    SitmunFrontendCoreModule,\r\n \r\n  ],\r\n  declarations: [\r\n    DataGridComponent\r\n  ],\r\n  entryComponents: [\r\n  ],\r\n  providers: [\r\n  ],\r\n  exports: [\r\n    HttpClientModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    NoopAnimationsModule,\r\n    AngularHalModule,\r\n    TranslateModule,\r\n    ReactiveFormsModule,\r\n    DataGridComponent,\r\n    SitmunFrontendCoreModule\r\n  ]\r\n})\r\nexport class SitmunFrontendGuiModule {\r\n}\r\n"],"names":["AllCommunityModules","EventEmitter","Component","Input","Output","NgModule","RouterModule","HttpClientModule","CommonModule","FormsModule","NoopAnimationsModule","AngularHalModule","ReactiveFormsModule","BrowserAnimationsModule","AgGridModule","SitmunFrontendCoreModule","TranslateModule"],"mappings":"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"}
