!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ag-grid-community/all-modules"),require("@angular/forms"),require("@angular/common"),require("@angular/common/http"),require("@angular/platform-browser/animations"),require("@angular/router"),require("@ngx-translate/core"),require("@sitmun/frontend-core"),require("@ag-grid-community/angular")):"function"==typeof define&&define.amd?define("@sitmun/frontend-gui",["exports","@angular/core","@ag-grid-community/all-modules","@angular/forms","@angular/common","@angular/common/http","@angular/platform-browser/animations","@angular/router","@ngx-translate/core","@sitmun/frontend-core","@ag-grid-community/angular"],e):e((t.sitmun=t.sitmun||{},t.sitmun["frontend-gui"]={}),t.ng.core,null,t.ng.forms,t.ng.common,t.ng.common.http,t.ng.platformBrowser.animations,t.ng.router,null,null,null)}(this,function(t,e,o,n,i,r,a,s,l,d,u){"use strict";var p=(c.prototype.onGridReady=function(t){this.params=t,this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.gridApi.rowHeight=100,this.getElements(),this.gridApi.sizeColumnsToFit()},c.prototype.quickSearch=function(){this.gridApi.setQuickFilter(this.searchValue)},c.prototype.getElements=function(){var e=this;this.getAll().subscribe(function(t){console.log(t),e.rowData=t})},c.prototype.removeData=function(){this.gridApi.stopEditing(!1);var t=this.gridApi.getSelectedNodes().map(function(t){return t.data});console.log(t),this.remove.emit(t)},c.prototype.newData=function(){console.log(this.comptadorCanvis),this.gridApi.stopEditing(!1),this["new"].emit(!0)},c.prototype.applyChanges=function(){var t,e,o,n,i,r=[];this.gridApi.stopEditing(!1);try{for(var a=(t=this.map.keys(),e="function"==typeof Symbol&&t[Symbol.iterator],o=0,e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}),s=a.next();!s.done;s=a.next()){var l=s.value;r.push(this.gridApi.getRowNode(l).data)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}this.sendChanges.emit(r),this.map.clear(),this.comptadorCanvis=0,this.comptadorCanvisAnterior=0,this.comptadorRedo=0,this.params.colDef.cellStyle={backgroundColor:"#FFFFFF"},this.gridApi.redrawRows()},c.prototype.deleteChanges=function(){console.log(this.comptadorCanvis);for(var t=0;t<this.comptadorCanvis;t++)this.gridApi.undoCellEditing();this.map.clear(),this.comptadorCanvisAnterior=0,this.comptadorCanvis=0,this.comptadorRedo=0,this.params.colDef.cellStyle={backgroundColor:"#FFFFFF"},this.gridApi.redrawRows()},c.prototype.undo=function(){this.gridApi.stopEditing(!1),this.gridApi.undoCellEditing(),--this.comptadorCanvis,this.comptadorRedo+=1},c.prototype.redo=function(){this.gridApi.stopEditing(!1),this.gridApi.redoCellEditing(),this.comptadorCanvis+=1,--this.comptadorRedo},c.prototype.onCellEditingStopped=function(t){this.comptadorCanvis++,this.comptadorRedo=0,this.onCellValueChanged(t)},c.prototype.onCellValueChanged=function(t){var e,o;this.params=t,this.comptadorCanvis>this.comptadorCanvisAnterior&&(this.map.has(t.node.id)?(e=this.map.get(t.node.id),this.map.set(t.node.id,e+1)):this.map.set(t.node.id,1),o=this.gridApi.getDisplayedRowAtIndex(t.rowIndex),t.colDef.cellStyle={backgroundColor:"#17AB4D"},this.gridApi.redrawRows({rowNodes:[o]}),t.colDef.cellStyle={backgroundColor:"#FFFFFF"},this.comptadorCanvisAnterior++),this.comptadorCanvis<this.comptadorCanvisAnterior&&(1===(e=this.map.get(t.node.id))?(this.map["delete"](t.node.id),o=this.gridApi.getDisplayedRowAtIndex(t.rowIndex),t.colDef.cellStyle={backgroundColor:"#FFFFFF"},this.gridApi.redrawRows({rowNodes:[o]})):(this.map.set(t.node.id,e-1),o=this.gridApi.getDisplayedRowAtIndex(t.rowIndex),t.colDef.cellStyle={backgroundColor:"#17AB4D"},this.gridApi.redrawRows({rowNodes:[o]}),t.colDef.cellStyle={backgroundColor:"#FFFFFF"}),this.comptadorCanvisAnterior--)},c.decorators=[{type:e.Component,args:[{selector:"app-data-grid",template:'<div class="container" style=" width:100%; height: 100%;"  >\n\n\n    \n\n    <div class="row">\n        <div class="text-left" >\n            <label>Search </label>\n            <input type="text" placeholder="" (keyup)="quickSearch()" [(ngModel)]="searchValue" ml-2 >\n            \n        </div>\n\n\n        <div class=" text-right btn-group-sm">\n            <button class="btn btn-danger"  (click)="deleteChanges()" [disabled]="comptadorCanvis <= 0">Delete Changes</button>\n            <button class="btn btn-warning" (click)="undo()" [disabled]="comptadorCanvis <= 0" >Undo</button>\n            <button class="btn btn-warning" (click)="redo()" [disabled]="comptadorRedo <= 0">Redo</button>\n            <button class="btn btn-success" (click)="applyChanges()" [disabled]="comptadorCanvis <= 0" >Apply Changes</button>\n        </div>\n\n        \n        <div class=" text-right btn-group-sm">\n            <button class="btn btn-secondary" (click)="removeData()">Remove</button>\n            <button class="btn btn-success" (click)="newData()">New</button>\n        </div>\n\n\n    </div>\n\n    <div class="row" style="width:100%; height: 100%">\n        <div class="ag-theme-balham" id="myGrid" style=" width:100%; height: 100%" >\n            <ag-grid-angular\n            style=" width: 100%; height: 100%;"\n            class="ag-theme-balham"\n            [floatingFilter]="true"\n            [rowData]="rowData"\n            [columnDefs]="columnDefs"\n            [gridOptions]="gridOptions"\n            [animateRows]="true"\n            [pagination]="false"\n            [modules]="modules"     \n            [undoRedoCellEditing]="true"    \n            [undoRedoCellEditingLimit]= 200\n            [suppressRowClickSelection]=true\n            [enableCellChangeFlash]=true\n            rowSelection="multiple"\n            (cellEditingStopped) ="onCellEditingStopped($event)"\n            (cellValueChanged)="onCellValueChanged($event)"\n            (gridReady)="onGridReady($event)">\n            \n            </ag-grid-angular>\n        </div>\n    </div>\n</div>\n\n',styles:["label{display:inline-block;margin-right:5px;margin-left:5px;margin-top:5px}"]}]}],c.ctorParameters=function(){return[]},c.propDecorators={columnDefs:[{type:e.Input}],getAll:[{type:e.Input}],remove:[{type:e.Output}],"new":[{type:e.Output}],sendChanges:[{type:e.Output}]},c);function c(){this.modules=o.AllCommunityModules,this.map=new Map,this.remove=new e.EventEmitter,this["new"]=new e.EventEmitter,this.sendChanges=new e.EventEmitter,this.comptadorCanvis=0,this.comptadorCanvisAnterior=0,this.comptadorRedo=0,this.gridOptions={defaultColDef:{flex:1,filter:!0,editable:!0,minWidth:100,cellStyle:{backgroundColor:"#FFFFFF"}},rowSelection:"multiple"}}m.decorators=[{type:e.NgModule,args:[{imports:[s.RouterModule,r.HttpClientModule,i.CommonModule,n.FormsModule,a.NoopAnimationsModule,d.AngularHalModule,n.ReactiveFormsModule,a.BrowserAnimationsModule,u.AgGridModule.withComponents([]),d.SitmunFrontendCoreModule],declarations:[p],entryComponents:[],providers:[],exports:[r.HttpClientModule,i.CommonModule,n.FormsModule,a.NoopAnimationsModule,d.AngularHalModule,l.TranslateModule,n.ReactiveFormsModule,p,d.SitmunFrontendCoreModule]}]}],d=m;function m(){}t.DataGridComponent=p,t.SitmunFrontendGuiModule=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=sitmun-frontend-gui.umd.min.js.map